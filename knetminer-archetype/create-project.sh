#
# This file is generated by the POM from the copy at /src/main/resources/create-project.sh
#
groupId="$1"
artifactId="$2"
version="$3"

if [[ "$#" < 3 ]]; then
	cat <<EOT


Creates a new Knetminer project from our archetype.  
	
	$(basename $0) <groupId> <artifactId> <version> 

EOT
	exit 1
fi


# First get the archetype definition file, as per
# https://maven.apache.org/archetype/maven-archetype-plugin/archetype-repository.html
#
settings="/tmp/knetminer-archetype-settings.xml"
curl -L "https://raw.githubusercontent.com/Rothamsted/knetminer-common/master/knetminer-archetype/settings.xml" \
     -o "$settings"
     
# So that now we can use it
#
yes | mvn archetype:generate \
	-DgroupId=$groupId -DartifactId=$artifactId -Dversion=$version \
	-DarchetypeGroupId=uk.ac.rothamsted.knetminer \
	-DarchetypeArtifactId=knetminer-archetype \
	-DarchetypeVersion=1.0-SNAPSHOT \
	-DinteractiveMode=false \
	-Dsettings="$settings"
